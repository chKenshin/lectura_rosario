<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rosario - Guía de Oración</title>
    <style>
        /* Estilos generales */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .controls {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }
        
        .day-info {
            background-color: #e8f4fd;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .rosario-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            min-height: 400px;
        }
        
        .current-step {
            background-color: #f0f8ff;
            padding: 15px;
            border-left: 4px solid #4a90e2;
            margin-bottom: 15px;
            border-radius: 0 5px 5px 0;
        }
        
        .prayer-counter {
            text-align: center;
            font-size: 1.2em;
            margin: 15px 0;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 5px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #4a90e2;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #357abd;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .options {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .mystery-title {
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .meditation {
            font-style: italic;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .prayer {
            margin-bottom: 15px;
            padding-left: 10px;
        }
        
        .leader {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .response {
            margin-left: 20px;
            color: #555;
        }
        
        .completed {
            color: #888;
            text-decoration: line-through;
        }
        
        .active {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Rosario - Guía de Oración</h1>
            <p>Una herramienta interactiva para rezar el rosario según la tradición católica</p>
        </header>
        
        <div class="controls">
            <div class="day-info" id="dayInfo"></div>
            <div class="options">
                <label class="checkbox-label">
                    <input type="checkbox" id="showFullPrayers" checked>
                    Mostrar oraciones completas
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="autoAdvance">
                    Avance automático (experimental)
                </label>
            </div>
        </div>
        
        <div class="rosario-content" id="rosarioContent">
            <!-- El contenido del rosario se cargará aquí dinámicamente -->
        </div>
        
        <div class="prayer-counter" id="prayerCounter"></div>
        
        <div class="navigation">
            <button id="prevBtn" disabled>Anterior</button>
            <button id="nextBtn">Siguiente</button>
            <button id="resetBtn">Reiniciar</button>
        </div>
    </div>

    <script>
        // Datos del rosario extraídos del documento
        const rosaryData = {
            // Señal de la Cruz
            start: {
                title: "Señal de la Cruz",
                content: [
                    { type: "prayer", leader: "Por la señal de la Santa Cruz.", response: "" },
                    { type: "prayer", leader: "De nuestros enemigos líbranos, Señor Dios Nuestro", response: "" },
                    { type: "prayer", leader: "En el nombre del Padre y del Hijo y del Espíritu Santo.", response: "Amén." },
                    { type: "prayer", leader: "Abre, Señor, mis labios.", response: "Y mi boca cantará tus alabanzas." },
                    { type: "prayer", leader: "Ven, oh Dios, en mi ayuda.", response: "Apresúrate, Señor, en socorrerme." },
                    { type: "prayer", leader: "Gloria al Padre...", response: "" }
                ]
            },
            
            // Ofrecimiento
            offering: {
                title: "Ofrecimiento del Rosario",
                content: [
                    { type: "meditation", text: "Divino Jesús, te ofrecemos el Rosario que vamos a rezar para contemplar los Misterios de nuestra Redención, Concédenos que, por la intercesión de María, vuestra Madre Santísima, a quien nos dirigimos, obtengamos las gracias necesarias para rezarlo bien y ganar las indulgencias de esta santa devoción. Así sea." }
                ]
            },
            
            // Credo
            creed: {
                title: "Credo",
                content: [
                    { type: "meditation", text: "Creo en Dios Padre todopoderoso, creador del cielo y de la tierra. Creo en Jesucristo, su único Hijo, Nuestro Señor, que fue concebido por obra y gracia del Espíritu Santo, nació de Santa María Virgen; padeció bajo el poder de Poncio Pilato, fue crucificado, muerto y sepultado; descendió a los infiernos, al tercer día resucitó de entre los muertos; subió al cielo y está sentado a la derecha de Dios Padre todopoderoso. Desde allí ha de venir a juzgar a vivos y muertos. Creo en el Espíritu Santo; la Santa Iglesia Católica; la comunión de los Santos, el perdón de los pecados; la resurrección de los muertos y la vida eterna." }
                ]
            },
            
            // Misterios según el día
            mysteries: {
                gozosos: {
                    title: "Misterios Gozosos",
                    days: ["lunes", "sábado"],
                    mysteries: [
                        {
                            title: "Primer Misterio Gozoso: La Anunciación",
                            meditation: "El ángel le dijo a María, 'vas a quedar embarazada y darás a luz a un hijo, al que pondrás el nombre de Jesús. Será grande, y con razón lo llamarán; Hijo del Altísimo.'",
                            prayers: {
                                ourFather: 1,
                                hailMary: 10, // Para el rosario completo
                                gloryBe: 1,
                                fatimaPrayer: 1
                            }
                        },
                        // ... otros misterios gozosos
                    ]
                },
                // ... otros tipos de misterios (luminosos, dolorosos, gloriosos)
            },
            
            // Final del rosario
            end: {
                title: "Final del Rosario",
                content: [
                    { type: "prayer", title: "Agradecimiento", text: "Infinitas gracias te damos, soberana princesa, por los beneficios que todos los días recibimos de tus liberales, manos. Dígnate, ahora y siempre, tomarnos bajo tu poderoso amparo. Y para más obligarte a ello, te saludamos diciendo:" },
                    { type: "prayer", title: "Salve", text: "Dios te salve, Reina y Madre de misericordia, vida, dulzura y esperanza nuestra, Dios te salve. A ti llamamos los desterrados hijos de Eva; a ti suspiramos, gimiendo y llorando en este valle de lágrimas. Ea, pues, Señora, abogada nuestra, vuelve a nosotros esos tus ojos misericordiosos; y después de este destierro muéstranos a Jesús, fruto bendito de tu vientre, oh clemente oh piadosa, oh dulce siempre Virgen María! Ruega por nosotros, Santa Madre de Dios, para que seamos dignos de alcanzar las promesas y gracias de Nuestro Señor Jesucristo, Amén" },
                    // ... otras oraciones finales
                ]
            }
        };

        // Estado de la aplicación
        let currentState = {
            currentSection: 'start',
            currentStep: 0,
            currentMystery: 0,
            currentPrayer: 0,
            showFullPrayers: true,
            autoAdvance: false
        };

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            initializeRosary();
            setupEventListeners();
            updateDisplay();
        });

        function initializeRosary() {
            // Determinar los misterios del día
            const today = new Date().toLocaleDateString('es-ES', { weekday: 'long' });
            document.getElementById('dayInfo').textContent = `Hoy es ${today} - Misterios: ${getTodaysMysteries()}`;
            
            // Configurar estado inicial
            currentState.showFullPrayers = document.getElementById('showFullPrayers').checked;
            currentState.autoAdvance = document.getElementById('autoAdvance').checked;
        }

        function getTodaysMysteries() {
            const today = new Date().getDay(); // 0: Domingo, 1: Lunes, ..., 6: Sábado
            switch(today) {
                case 0: return "Gloriosos";
                case 1: return "Gozosos";
                case 2: return "Dolorosos";
                case 3: return "Gloriosos";
                case 4: return "Luminosos";
                case 5: return "Dolorosos";
                case 6: return "Gozosos";
                default: return "Gozosos";
            }
        }

        function setupEventListeners() {
            document.getElementById('showFullPrayers').addEventListener('change', function() {
                currentState.showFullPrayers = this.checked;
                updateDisplay();
            });

            document.getElementById('autoAdvance').addEventListener('change', function() {
                currentState.autoAdvance = this.checked;
            });

            document.getElementById('prevBtn').addEventListener('click', previousStep);
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('resetBtn').addEventListener('click', resetRosary);
        }

        function updateDisplay() {
            const contentDiv = document.getElementById('rosarioContent');
            const counterDiv = document.getElementById('prayerCounter');
            
            // Limpiar contenido
            contentDiv.innerHTML = '';
            counterDiv.textContent = '';
            
            // Mostrar contenido según la sección actual
            switch(currentState.currentSection) {
                case 'start':
                    displaySection(rosaryData.start, contentDiv);
                    break;
                case 'offering':
                    displaySection(rosaryData.offering, contentDiv);
                    break;
                case 'creed':
                    displaySection(rosaryData.creed, contentDiv);
                    break;
                case 'mysteries':
                    displayMysteries(contentDiv, counterDiv);
                    break;
                case 'end':
                    displaySection(rosaryData.end, contentDiv);
                    break;
            }
            
            // Actualizar estado de los botones
            updateButtonStates();
        }

        function displaySection(section, container) {
            const title = document.createElement('h2');
            title.className = 'mystery-title';
            title.textContent = section.title;
            container.appendChild(title);
            
            section.content.forEach((item, index) => {
                const element = document.createElement('div');
                
                if (item.type === 'meditation') {
                    element.className = 'meditation';
                    element.textContent = item.text;
                } else if (item.type === 'prayer') {
                    if (currentState.showFullPrayers || index <= currentState.currentStep) {
                        element.className = index === currentState.currentStep ? 'prayer active' : 'prayer';
                        
                        if (item.leader) {
                            const leaderElem = document.createElement('div');
                            leaderElem.className = 'leader';
                            leaderElem.textContent = item.leader;
                            element.appendChild(leaderElem);
                        }
                        
                        if (item.response) {
                            const responseElem = document.createElement('div');
                            responseElem.className = 'response';
                            responseElem.textContent = item.response;
                            element.appendChild(responseElem);
                        }
                        
                        if (item.text) {
                            element.textContent = item.text;
                        }
                    }
                }
                
                container.appendChild(element);
            });
        }

        function displayMysteries(contentDiv, counterDiv) {
            // Esta función mostraría los misterios según el día
            // Implementación simplificada para este ejemplo
            const mysteriesType = getTodaysMysteries().toLowerCase();
            const mysteries = rosaryData.mysteries[mysteriesType];
            
            const title = document.createElement('h2');
            title.className = 'mystery-title';
            title.textContent = mysteries.title;
            contentDiv.appendChild(title);
            
            // Mostrar el misterio actual
            const currentMystery = mysteries.mysteries[currentState.currentMystery];
            const mysteryTitle = document.createElement('h3');
            mysteryTitle.textContent = currentMystery.title;
            contentDiv.appendChild(mysteryTitle);
            
            const meditation = document.createElement('div');
            meditation.className = 'meditation';
            meditation.textContent = currentMystery.meditation;
            contentDiv.appendChild(meditation);
            
            // Mostrar contador de oraciones
            if (currentState.currentPrayer > 0) {
                counterDiv.textContent = `Avemaría ${currentState.currentPrayer} de ${currentMystery.prayers.hailMary}`;
            }
        }

        function nextStep() {
            // Lógica para avanzar al siguiente paso del rosario
            // Esta implementación es simplificada
            if (currentState.currentSection === 'start') {
                currentState.currentSection = 'offering';
            } else if (currentState.currentSection === 'offering') {
                currentState.currentSection = 'creed';
            } else if (currentState.currentSection === 'creed') {
                currentState.currentSection = 'mysteries';
            } else if (currentState.currentSection === 'mysteries') {
                // Avanzar dentro de los misterios
                const mysteriesType = getTodaysMysteries().toLowerCase();
                const currentMystery = rosaryData.mysteries[mysteriesType].mysteries[currentState.currentMystery];
                
                if (currentState.currentPrayer < currentMystery.prayers.hailMary) {
                    currentState.currentPrayer++;
                } else if (currentState.currentMystery < rosaryData.mysteries[mysteriesType].mysteries.length - 1) {
                    currentState.currentMystery++;
                    currentState.currentPrayer = 0;
                } else {
                    currentState.currentSection = 'end';
                }
            }
            
            updateDisplay();
        }

        function previousStep() {
            // Lógica para retroceder al paso anterior
            // Implementación simplificada
            if (currentState.currentSection === 'offering') {
                currentState.currentSection = 'start';
            } else if (currentState.currentSection === 'creed') {
                currentState.currentSection = 'offering';
            } else if (currentState.currentSection === 'mysteries') {
                if (currentState.currentPrayer > 0) {
                    currentState.currentPrayer--;
                } else if (currentState.currentMystery > 0) {
                    currentState.currentMystery--;
                    const mysteriesType = getTodaysMysteries().toLowerCase();
                    const previousMystery = rosaryData.mysteries[mysteriesType].mysteries[currentState.currentMystery];
                    currentState.currentPrayer = previousMystery.prayers.hailMary;
                } else {
                    currentState.currentSection = 'creed';
                }
            } else if (currentState.currentSection === 'end') {
                currentState.currentSection = 'mysteries';
                const mysteriesType = getTodaysMysteries().toLowerCase();
                currentState.currentMystery = rosaryData.mysteries[mysteriesType].mysteries.length - 1;
                currentState.currentPrayer = rosaryData.mysteries[mysteriesType].mysteries[currentState.currentMystery].prayers.hailMary;
            }
            
            updateDisplay();
        }

        function resetRosary() {
            currentState = {
                currentSection: 'start',
                currentStep: 0,
                currentMystery: 0,
                currentPrayer: 0,
                showFullPrayers: currentState.showFullPrayers,
                autoAdvance: currentState.autoAdvance
            };
            updateDisplay();
        }

        function updateButtonStates() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Habilitar/deshabilitar botones según la posición actual
            prevBtn.disabled = currentState.currentSection === 'start' && 
                              currentState.currentStep === 0 && 
                              currentState.currentMystery === 0 && 
                              currentState.currentPrayer === 0;
            
            // El botón siguiente siempre está habilitado excepto al final
            nextBtn.disabled = currentState.currentSection === 'end';
        }
    </script>
</body>
</html>
